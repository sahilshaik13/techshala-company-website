{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///D:/techshala-company-website/app/api/contact/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\r\nimport nodemailer from 'nodemailer';\r\n\r\nexport async function POST(req: Request) {\r\n  try {\r\n    const { name, email, subject, message } = await req.json();\r\n\r\n    // Debug: Check if variables are loaded (Check your terminal when you send)\r\n    console.log(\"Sending email from:\", process.env.SMTP_USER);\r\n    if (!process.env.SMTP_PASSWORD) {\r\n        console.error(\"ERROR: SMTP_PASSWORD is missing in .env.local\");\r\n        return NextResponse.json({ error: 'Server misconfiguration' }, { status: 500 });\r\n    }\r\n\r\n    // 1. Configure the transporter for Gmail\r\n    const transporter = nodemailer.createTransport({\r\n      host: 'smtp.gmail.com',\r\n      port: 465,\r\n      secure: true, // Use SSL\r\n      auth: {\r\n        user: process.env.SMTP_USER,\r\n        pass: process.env.SMTP_PASSWORD, // Must be the 16-char App Password\r\n      },\r\n    });\r\n\r\n    // 2. Define email structure\r\n    const mailOptions = {\r\n      from: `\"Techshala Website\" <${process.env.SMTP_USER}>`, // Sender address\r\n      to: process.env.MY_EMAIL, // Receiver address\r\n      replyTo: email, // When you click reply, it goes to the user\r\n      subject: subject || `New Inquiry from ${name}`,\r\n      text: `Name: ${name}\\nEmail: ${email}\\n\\nMessage:\\n${message}`,\r\n      html: `\r\n        <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px; border: 1px solid #e0e0e0; border-radius: 8px;\">\r\n          <h2 style=\"color: #2563EB; border-bottom: 2px solid #2563EB; padding-bottom: 10px;\">New Inquiry</h2>\r\n          \r\n          <p><strong>Name:</strong> ${name}</p>\r\n          <p><strong>Email:</strong> <a href=\"mailto:${email}\">${email}</a></p>\r\n          <p><strong>Subject:</strong> ${subject}</p>\r\n          \r\n          <div style=\"background-color: #f9fafb; padding: 15px; border-radius: 6px; margin-top: 20px;\">\r\n            <p style=\"margin: 0; color: #374151;\"><strong>Message:</strong></p>\r\n            <p style=\"margin-top: 8px; white-space: pre-wrap; color: #4b5563;\">${message}</p>\r\n          </div>\r\n          \r\n          <p style=\"font-size: 12px; color: #9ca3af; margin-top: 30px; text-align: center;\">\r\n            Sent via Techshala Contact Form\r\n          </p>\r\n        </div>\r\n      `,\r\n    };\r\n\r\n    // 3. Send the email\r\n    await transporter.sendMail(mailOptions);\r\n\r\n    return NextResponse.json({ message: 'Email sent successfully' }, { status: 200 });\r\n  } catch (error) {\r\n    console.error('Error sending email:', error);\r\n    return NextResponse.json({ error: 'Failed to send email' }, { status: 500 });\r\n  }\r\n}"],"names":[],"mappings":";;;;AAAA;;;;;;;;AAGO,eAAe,KAAK,GAAY;IACrC,IAAI;QACF,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,OAAO,EAAE,GAAG,MAAM,IAAI,IAAI;QAExD,2EAA2E;QAC3E,QAAQ,GAAG,CAAC,uBAAuB,QAAQ,GAAG,CAAC,SAAS;QACxD,IAAI,CAAC,QAAQ,GAAG,CAAC,aAAa,EAAE;YAC5B,QAAQ,KAAK,CAAC;YACd,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAA0B,GAAG;gBAAE,QAAQ;YAAI;QACjF;QAEA,yCAAyC;QACzC,MAAM,cAAc,WAAW,eAAe,CAAC;YAC7C,MAAM;YACN,MAAM;YACN,QAAQ;YACR,MAAM;gBACJ,MAAM,QAAQ,GAAG,CAAC,SAAS;gBAC3B,MAAM,QAAQ,GAAG,CAAC,aAAa;YACjC;QACF;QAEA,4BAA4B;QAC5B,MAAM,cAAc;YAClB,MAAM,CAAC,qBAAqB,EAAE,QAAQ,GAAG,CAAC,SAAS,CAAC,CAAC,CAAC;YACtD,IAAI,QAAQ,GAAG,CAAC,QAAQ;YACxB,SAAS;YACT,SAAS,WAAW,CAAC,iBAAiB,EAAE,MAAM;YAC9C,MAAM,CAAC,MAAM,EAAE,KAAK,SAAS,EAAE,MAAM,cAAc,EAAE,SAAS;YAC9D,MAAM,CAAC;;;;oCAIuB,EAAE,KAAK;qDACU,EAAE,MAAM,EAAE,EAAE,MAAM;uCAChC,EAAE,QAAQ;;;;+EAI8B,EAAE,QAAQ;;;;;;;MAOnF,CAAC;QACH;QAEA,oBAAoB;QACpB,MAAM,YAAY,QAAQ,CAAC;QAE3B,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAA0B,GAAG;YAAE,QAAQ;QAAI;IACjF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,wBAAwB;QACtC,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAuB,GAAG;YAAE,QAAQ;QAAI;IAC5E;AACF"}}]
}